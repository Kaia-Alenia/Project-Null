#include <gba.h>

// Definimos un tile de 8x8 p√≠xeles y su paleta
const unsigned short tile_data[] = {
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
};

const unsigned short palette[] = {
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
    0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
};

int main() {
    // Configuramos el registro DISPCNT para activar Mode 0 y BG0
    *(volatile unsigned short*)0x0400_0000 = 0x0100; // DISPCNT

    // Configuramos el registro BG0CNT
    *(volatile unsigned short*)0x0400_0008 = 0x0000; // BG0CNT

    // Cargamos la paleta en la VRAM
    for (int i = 0; i < 16; i++) {
        *(volatile unsigned short*)(0x0500_0000 + i * 2) = palette[i];
    }

    // Cargamos el tile en la VRAM
    for (int i = 0; i < 32; i++) {
        *(volatile unsigned short*)(0x0600_0000 + i * 2) = tile_data[i];
    }

    // Llenamos el mapa de fondo con el tile
    for (int i = 0; i < 32 * 32; i++) {
        *(volatile unsigned short*)(0x0600_0000 + 0x1000 + i * 2) = 0x0000;
    }

    while (1) {
        // Bucle infinito para mantener la pantalla activa
    }

    return 0;
}